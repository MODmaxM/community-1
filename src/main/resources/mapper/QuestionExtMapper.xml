<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.learn.majiang.mapper.QuestionExtMapper">
    <resultMap id="BaseResultMap" type="com.learn.majiang.model.Question">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Aug 22 13:44:38 CST 2019.
        -->
        <id column="Id" jdbcType="INTEGER" property="id"/>
        <result column="title" jdbcType="VARCHAR" property="title"/>
        <result column="gmtCreate" jdbcType="BIGINT" property="gmtcreate"/>
        <result column="gmtModified" jdbcType="BIGINT" property="gmtmodified"/>
        <result column="creator" jdbcType="INTEGER" property="creator"/>
        <result column="commentCount" jdbcType="INTEGER" property="commentcount"/>
        <result column="viewCount" jdbcType="INTEGER" property="viewcount"/>
        <result column="likeCount" jdbcType="INTEGER" property="likecount"/>
        <result column="tag" jdbcType="VARCHAR" property="tag"/>
    </resultMap>
    <update id="incView" parameterType="com.learn.majiang.model.Question">
        update question
        set
        viewCount = viewCount + #{viewcount,jdbcType=INTEGER}
        where Id = #{id}
    </update>
    <update id="incCommentCount" parameterType="com.learn.majiang.model.Question">
        update question
        set
            commentCount = commentCount+ #{commentcount,jdbcType=INTEGER}
        where Id = #{id}
    </update>
    <select id="selectRelated" parameterType="com.learn.majiang.model.Question" resultMap="BaseResultMap">
        select *
        from question
        where Id != #{id}
          and tag regexp #{tag}
    </select>
</mapper>